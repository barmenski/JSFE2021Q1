(()=>{"use strict";var e={309:(e,t,s)=>{s.r(t)},76:(e,t,s)=>{s.r(t)},80:(e,t,s)=>{s.r(t)},442:(e,t,s)=>{s.r(t)},528:(e,t,s)=>{s.r(t)},3:(e,t,s)=>{s.r(t)},148:(e,t,s)=>{s.r(t)},580:(e,t,s)=>{s.r(t)},387:(e,t,s)=>{s.r(t)},752:function(e,t,s){var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}o((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const n=s(366),a=s(229),r=s(936),c=s(295),o=s(831),l=s(432);t.App=class{constructor(e){this.rootElement=e,this.gamePage=()=>{this.wrapper.element.innerHTML="",window.app.start(),this.wrapper.element.appendChild(this.game.element)},this.settingsPage=()=>{this.wrapper.element.innerHTML="",this.wrapper.element.appendChild(this.settings.element),this.settings.initSettings()},this.initPage=()=>{this.rootElement.innerHTML="",this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.wrapper.element),this.wrapper.element.appendChild(this.aboutGame.element),this.header.initButton(),this.header.initPageLink(),this.header.checkValid()},this.aboutGamePage=()=>{this.wrapper.element.innerHTML="",this.wrapper.element.appendChild(this.aboutGame.element)},this.bestScorePage=()=>{this.wrapper.element.innerHTML="",this.wrapper.element.appendChild(this.score.element)},this.header=new r.Header,this.game=new a.Game,this.aboutGame=new n.AboutGame,this.settings=new o.Settings,this.score=new c.Score,this.wrapper=new l.Wrapper,this.rootElement=e}start(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[this.settings.categoryCards],s=t.images.map((e=>`${t.category}/${e}`)).slice(32-this.settings.amountCards);this.game.newGame(s)}))}}},366:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutGame=void 0;const i=s(583);s(309);class n extends i.BaseComponent{constructor(){super("div",["about-game"]),this.element.innerHTML='\n      <h1 class="heading">How to play?</h1>\n      <div class="main-section">\n        <div class="step one">\n          <div class="description-container">\n            <p class="description__number">1</p>\n            <p class="description__text">Register new player in game</p>\n          </div>\n          <div class="step-image"></div>\n        </div>\n        <div class="step two">\n          <div class="description-container">\n            <p class="description__number">2</p>\n            <p class="description__text">Configure your game settings</p>\n          </div>\n          <div class="step-image"></div>\n        </div>\n        <div class="step three">\n          <div class="description-container">\n            <p class="description__number">3</p>\n            <p class="description__text">Start you new game! Remember card positions and match it before times up.</p>\n          </div>\n          <div class="step-image"></div>\n        </div>\n      </div>\n      '}}t.AboutGame=n},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,s(76);const i=s(583);class n extends i.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n    <div class="card">\n      <div class="card__front" style="background-image: url('./images/${e}')"></div>\n      <div class="card__back"></div>\n    </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=n},610:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,s(80);const i=s(583);class n extends i.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[],this.show_timer=null}clear(){this.cards=[],this.element.innerHTML="",this.show_timer&&clearTimeout(this.show_timer)}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),this.show_timer=setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),1e4)}}t.CardsField=n},342:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Congrat=void 0;const i=s(583);s(442);class n extends i.BaseComponent{constructor(){super("div",["congrat","notVisible"]),this.element.innerHTML='\n      <p class="congrat__text"></p>\n      <button type="submit" class="congrat__btn">OK</button>\n    '}}t.Congrat=n},229:function(e,t,s){var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}o((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const n=s(680),a=s(583),r=s(977),c=s(610),o=s(342),l=s(831),d=s(981);let m,v;class u extends a.BaseComponent{constructor(){super("div",["wrapper-cards"]),this.isAnimation=!1,this.finishGame=()=>{const e=document.querySelector(".timer"),t=document.querySelector(".start__btn"),s=document.querySelector(".stop__btn"),i=document.querySelector(".cover"),n=document.querySelector(".congrat"),a=document.querySelector(".congrat__text"),r=document.querySelector(".congrat__btn");t.classList.remove("notVisible"),s.classList.add("notVisible"),this.timer.Stop(),m=e.innerHTML,v=this.timer.resultTime;let c=100*this.rightClick-10*v;c<0&&(c=0),i.classList.remove("notVisible"),n.classList.remove("notVisible"),a.innerHTML=`Congratulations! You successfully found all matches on ${m} minutes. Score: ${c}`,r.addEventListener("click",(()=>{i.classList.add("notVisible"),n.classList.add("notVisible"),a.innerHTML="",window.location.hash="#best-score"})),i.addEventListener("click",(()=>{i.classList.add("notVisible"),n.classList.add("notVisible"),a.innerHTML="",window.location.hash="#best-score"}))},this.cardsField=new c.CardsField,this.timer=new d.Timer,this.congrat=new o.Congrat,this.timer.Clear(),this.timer.Start(),this.settings=new l.Settings,this.rightClick=0,this.wrongClick=0,this.scoreClick=0,this.score=0,this.element.appendChild(this.timer.element),this.element.appendChild(this.cardsField.element),this.element.appendChild(this.congrat.element)}newGame(e){this.timer.Clear(),this.timer.Start(),this.cardsField.clear(),this.rightClick=0,this.wrongClick=0,this.scoreClick=0,this.score=0;const t=e.concat(e).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t);const s=document.querySelector(".timer"),i=document.querySelector(".start__btn"),n=document.querySelector(".stop__btn");n.addEventListener("click",(()=>{i.classList.remove("notVisible"),n.classList.add("notVisible"),this.timer.Stop(),m=s.innerHTML,v=this.timer.resultTime,window.location.hash="#best-score"}))}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(e.element.classList.add("wrong"),this.activeCard.element.classList.add("wrong"),this.wrongClick++,yield n.delay(1500),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()]),e.element.classList.remove("wrong"),this.activeCard.element.classList.remove("wrong")):(e.element.classList.add("right"),this.activeCard.element.classList.add("right"),this.rightClick++,this.rightClick===this.settings.amountCards&&this.finishGame()),this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=u},936:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=s(583),n=s(170);s(528);class a extends i.BaseComponent{constructor(){super("header",["header"]),this.initButton=()=>{const e=document.querySelector(".reg__btn"),t=document.getElementById("cover"),s=document.getElementById("formReg"),i=document.querySelector(".nav-link__about"),n=document.querySelector(".nav-link__score"),a=document.querySelector(".nav-link__settings");e.addEventListener("click",(()=>{document.body.classList.add("notScrollable"),t.classList.remove("notVisible"),s.classList.remove("notVisible")})),i.addEventListener("click",(()=>{i.classList.contains("active")||(n.classList.remove("active"),a.classList.remove("active"),i.classList.add("active"))})),n.addEventListener("click",(()=>{n.classList.contains("active")||(i.classList.remove("active"),a.classList.remove("active"),n.classList.add("active"))})),a.addEventListener("click",(()=>{a.classList.contains("active")||(i.classList.remove("active"),n.classList.remove("active"),a.classList.add("active"))}))},this.checkValid=()=>{const e=document.getElementById("cover"),t=document.getElementById("formReg"),s=document.querySelector(".formReg-add__btn"),i=document.querySelector(".formReg-cancel__btn"),n=document.querySelector(".first-name-error"),a=document.querySelector(".last-name-error"),r=document.querySelector(".email-error"),c=document.querySelector(".first-name-error + .validCheck__image"),o=document.querySelector(".last-name-error + .validCheck__image"),l=document.querySelector(".email-error + .validCheck__image"),d=document.querySelector(".start__btn"),m=document.querySelector(".stop__btn"),v=document.querySelector(".avatar__img"),u=document.querySelector(".reg__btn"),h=document.querySelector(".first-name"),p=document.querySelector(".last-name"),b=document.querySelector(".email");i.addEventListener("click",(()=>{document.body.classList.remove("notScrollable"),e.classList.add("notVisible"),t.classList.add("notVisible")})),e.addEventListener("click",(()=>{document.body.classList.remove("notScrollable"),e.classList.add("notVisible"),t.classList.add("notVisible")})),s.addEventListener("click",(()=>{u.classList.add("notVisible"),d.classList.remove("notVisible"),v.classList.remove("notVisible"),document.body.classList.remove("notScrollable"),e.classList.add("notVisible"),t.classList.add("notVisible"),this.player.firstName=h.value,this.player.lastName=p.value,this.player.email=b.value})),d.addEventListener("click",(()=>{d.classList.add("notVisible"),m.classList.remove("notVisible"),window.location.hash="#game"})),h.addEventListener("input",(()=>{""===h.value?(h.classList.add("inputError"),c.classList.add("notVisible"),n.innerHTML="Имя не может быть пустым.",s.classList.add("invalid"),s.setAttribute("disabled","")):h.value.match(/[0-9]/)?(h.classList.add("inputError"),c.classList.add("notVisible"),n.innerHTML="Имя не может состоять из цифр.",s.classList.add("invalid"),s.setAttribute("disabled","")):h.value.match(/[~!@#$%*()_—+=|:;"'`<>,.?/^]/)?(h.classList.add("inputError"),c.classList.add("notVisible"),n.innerHTML="Имя не может содержать служебные символы.",s.classList.add("invalid"),s.setAttribute("disabled","")):(n.innerHTML="",h.classList.remove("inputError"),c.classList.remove("notVisible"),s.classList.remove("invalid"),s.removeAttribute("disabled"))})),p.addEventListener("input",(()=>{""===p.value?(p.classList.add("inputError"),o.classList.add("notVisible"),a.innerHTML="Имя не может быть пустым.",s.classList.add("invalid"),s.setAttribute("disabled","")):p.value.match(/[0-9]/)?(p.classList.add("inputError"),o.classList.add("notVisible"),a.innerHTML="Имя не может состоять из цифр.",s.classList.add("invalid"),s.setAttribute("disabled","")):p.value.match(/[~!@#$%*()_—+=|:;"'`<>,.?/^]/)?(p.classList.add("inputError"),o.classList.add("notVisible"),a.innerHTML="Имя не может содержать служебные символы.",s.classList.add("invalid"),s.setAttribute("disabled","")):(a.innerHTML="",p.classList.remove("inputError"),o.classList.remove("notVisible"),s.classList.remove("invalid"),s.removeAttribute("disabled"))})),b.addEventListener("input",(()=>{b.value.match(/^[\w-.]+@([\w-]+.)+[\w-]{2,5}$/g)?(r.innerHTML="",b.classList.remove("inputError"),l.classList.remove("notVisible"),s.classList.remove("invalid"),s.removeAttribute("disabled")):""===b.value?(b.classList.add("inputError"),l.classList.add("notVisible"),r.innerHTML="Адрес не может быть пустым",s.classList.add("invalid"),s.setAttribute("disabled","")):(b.classList.add("inputError"),l.classList.add("notVisible"),r.innerHTML="Адрес должен соответствовать стандартному правилу формированию email [RFC].",s.classList.add("invalid"),s.setAttribute("disabled",""))}))},this.initPageLink=()=>{const e=document.querySelector(".nav-link__about"),t=document.querySelector(".nav-link__score"),s=document.querySelector(".nav-link__settings");window.addEventListener("hashchange",(()=>{switch(window.location.hash.slice(1)){case"about-game":e.classList.contains("active")||e.classList.add("active"),t.classList.remove("active"),s.classList.remove("active");break;case"settings":s.classList.contains("active")||s.classList.add("active"),t.classList.remove("active"),e.classList.remove("active");break;case"best-score":t.classList.contains("active")||t.classList.add("active"),s.classList.remove("active"),e.classList.remove("active");break;case"game":s.classList.remove("active"),t.classList.remove("active"),e.classList.remove("active");break;default:e.classList.contains("active")||e.classList.add("active"),t.classList.remove("active"),s.classList.remove("active")}}))},this.player=new n.Player,this.element.innerHTML='\n    <a href="#game" title="Go to game!" class="logo-link"></a>\n    <ul class="nav-list">\n      <li class="nav-item"><a href="#about-game" class="nav-link__about active">About Game</a></li>\n      <li class="nav-item"><a href="#best-score" class="nav-link__score">Best Score</a></li>\n      <li class="nav-item"><a href="#settings" class="nav-link__settings">Game Settings</a></li>\n    </ul>\n    <div class="wrapper__btn">\n      <div class="reg-form">\n        <button type="submit" class="reg__btn">REGISTER NEW PLAYER</button>\n        <button type="submit" class="start__btn notVisible">START GAME</button>\n        <button type="submit" class="stop__btn notVisible">STOP GAME</button>\n      </div>\n      <div class="avatar__img notVisible"></div>\n    </div>\n    <div id="cover" class="cover notVisible">\n    </div>\n    <div id="formReg" class="formReg notVisible">\n    <h1 class="heading-form">Registration new Player</h1>\n    <div class="action">\n      <div class="input-wrapper">\n        <div class="input-container">\n          <input type="text" class="first-name" placeholder="First Name" maxlength="30">\n          <div class="first-name-error"></div>\n          <div class="validCheck__image notVisible"></div>\n          <input type="text" class="last-name" placeholder="Last Name" maxlength="30">\n          <div class="last-name-error"></div>\n          <div class="validCheck__image notVisible"></div>\n          <input type="email" class="email" placeholder="E-mail" maxlength="30">\n          <div class="email-error"></div>\n          <div class="validCheck__image notVisible"></div>\n        </div>\n        <div class="player-avatar"></div>\n      </div>\n      <div class="button-container">\n          <button class="formReg-add__btn invalid" type="submit" disabled>Add User</button>\n          <button class="formReg-cancel__btn" type="submit">Cancel</button>\n      </div>\n    </div>\n  </div>\n  '}}t.Header=a},170:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0,t.Player=class{constructor(e="Jhon",t="Smith",s="jhon@smith.com",i=0){this.firstName=e,this.lastName=t,this.email=s,this.score=i}}},295:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;const i=s(583);s(3);class n extends i.BaseComponent{constructor(){super("div",["main"]),this.element.innerHTML='\n    <h1 class="heading">Best players</h1>\n    <ul class="score-list">\n      <li class="score-item">\n        <div class="item__image"></div>\n        <div class="item-container">\n          <div class="item__name">Nicci Troiani</div>\n          <div class="item__email">nicci@gmail.com</div>\n        </div>\n        <div class="item__score">Score: <span>456</span></div>\n      </li>\n      <li class="score-item">\n        <div class="item__image"></div>\n        <div class="item-container">\n          <div class="item__name">Nicci Troiani</div>\n          <div class="item__email">nicci@gmail.com</div>\n        </div>\n        <div class="item__score">Score: <span>456</span></div>\n      </li>\n      <li class="score-item">\n        <div class="item__image"></div>\n        <div class="item-container">\n          <div class="item__name">Nicci Troiani</div>\n          <div class="item__email">nicci@gmail.com</div>\n        </div>\n        <div class="item__score">Score: <span>456</span></div>\n      </li>\n    </ul>\n    '}}t.Score=n},831:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const i=s(583);s(148);class n extends i.BaseComponent{constructor(){super("div",["settings"]),this.initSettings=()=>{const e=document.querySelector(".category-cards-select"),t=document.querySelector(".amount-cards-select");e.addEventListener("change",(e=>{this.categoryCards=parseInt(e.target.value,10)})),t.addEventListener("change",(e=>{this.amountCards=parseInt(e.target.value,10)}))},this.categoryCards=0,this.amountCards=8,this.element.innerHTML='\n      <div class="game-cards">\n        <div class="select-container">\n          <h1 class="heading-settings">Game cards</h1>\n          <select class="category-cards-select">\n            <option value="">select game cards type</option>\n            <option class="select-item" value="0">Argentina</option>\n            <option class="select-item" value="1">Real assets</option>\n          </select>\n        </div>\n        <div class="select-container">\n          <h1 class="heading-settings">Difficulty</h1>\n          <select class="amount-cards-select">\n            <option value="">select game type</option>\n            <option class="select-item" value="8">4x4</option>\n            <option class="select-item" value="18">6x6</option>\n            <option class="select-item" value="32">8x8</option>\n          </select>\n        </div>\n      </div>\n    '}}t.Settings=n},981:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,s(580),t.Timer=class{constructor(){this.sec=0,this.min=0,this.resultTime=0,this.tick=()=>{this.sec++,this.sec>=60&&(this.min++,this.sec-=60),this.sec<10?this.min<10?this.element.innerHTML=`0${this.min}:0${this.sec}`:this.element.innerHTML=`${this.min}:0${this.sec}`:this.min<10?this.element.innerHTML=`0${this.min}:${this.sec}`:this.element.innerHTML=`${this.min}:${this.sec}`},this.Start=()=>{this.timerId=setInterval(this.tick,1e3)},this.Stop=()=>{this.timerId&&clearInterval(this.timerId),this.resultTime=this.sec+60*this.min},this.Clear=()=>{this.sec=0,this.min=0,this.timerId&&clearInterval(this.timerId),this.element.innerHTML=`0${this.min}:0${this.sec}`},this.element=document.createElement("div"),this.element.classList.add("timer"),this.timerId=null}}},432:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=void 0;const i=s(583);class n extends i.BaseComponent{constructor(){super("div",["wrapper"])}}t.Wrapper=n},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,s),a.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{s(387);const e=s(752),t=document.querySelector("body");if(!t)throw Error("<body> element not found");window.app=new e.App(t),window.app.initPage();const i=[{name:"settings",component:window.app.settingsPage},{name:"game",component:window.app.gamePage},{name:"best-score",component:window.app.bestScorePage}],n={name:"default",component:window.app.aboutGamePage};window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);(i.find((t=>t.name===e))||n).component()}))})()})();