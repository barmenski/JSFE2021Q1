(()=>{"use strict";var e={309:(e,t,s)=>{s.r(t)},42:(e,t,s)=>{s.r(t)},76:(e,t,s)=>{s.r(t)},80:(e,t,s)=>{s.r(t)},442:(e,t,s)=>{s.r(t)},361:(e,t,s)=>{s.r(t)},528:(e,t,s)=>{s.r(t)},533:(e,t,s)=>{s.r(t)},814:(e,t,s)=>{s.r(t)},730:(e,t,s)=>{s.r(t)},984:(e,t,s)=>{s.r(t)},3:(e,t,s)=>{s.r(t)},148:(e,t,s)=>{s.r(t)},580:(e,t,s)=>{s.r(t)},387:(e,t,s)=>{s.r(t)},752:function(e,t,s){var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const n=s(366),a=s(229),r=s(936),o=s(464),d=s(691),l=s(295),c=s(831),m=s(432),h=s(916);t.App=class{constructor(e){this.rootElement=e,this.gamePage=()=>{this.wrapper.element.innerHTML="",window.app.start(),this.wrapper.element.appendChild(this.game.element)},this.settingsPage=()=>{this.wrapper.element.innerHTML="",this.wrapper.element.appendChild(this.settings.element)},this.initPage=()=>{this.rootElement.innerHTML="",this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.wrapper.element),this.wrapper.element.appendChild(this.aboutGame.element)},this.aboutGamePage=()=>{this.wrapper.element.innerHTML="",this.wrapper.element.appendChild(this.aboutGame.element)},this.bestScorePage=()=>{this.wrapper.element.innerHTML="",this.score.reset(),this.wrapper.element.appendChild(this.score.element),this.score.addLine()},this.indexedDbPage=()=>{this.wrapper.element.innerHTML="",new Promise((()=>this.indexedDbTest.init("idb-test",3))).then((()=>this.indexedDbTest.getAndDisplayNotes(this.indexedDbTest.dbTest))),this.wrapper.element.appendChild(this.indexedDbTest.dbTestWrapper)},this.header=new r.Header,this.gameButton=new o.GameButton,this.regFormMini=new d.RegFormMini,this.game=new a.Game,this.aboutGame=new n.AboutGame,this.settings=new c.Settings,this.score=new l.Score,this.wrapper=new m.Wrapper,this.indexedDbTest=new h.IndexedDbTest,this.rootElement=e}start(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[this.settings.categoryCards],s=t.images.map((e=>`${t.category}/${e}`)).slice(32-this.settings.amountCards);this.game.newGame(s)}))}}},366:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutGame=void 0;const i=s(583);s(309);class n extends i.BaseComponent{constructor(){super("div",["about-game"]),this.element.innerHTML='\n      <h1 class="heading">How to play?</h1>\n      <div class="main-section">\n        <div class="step one">\n          <div class="description-container">\n            <p class="description__number">1</p>\n            <p class="description__text">Register new player in game</p>\n          </div>\n          <div class="step-image"></div>\n        </div>\n        <div class="step two">\n          <div class="description-container">\n            <p class="description__number">2</p>\n            <p class="description__text">Configure your game settings</p>\n          </div>\n          <div class="step-image"></div>\n        </div>\n        <div class="step three">\n          <div class="description-container">\n            <p class="description__number">3</p>\n            <p class="description__text">Start you new game! Remember card positions and match it before times up.</p>\n          </div>\n          <div class="step-image"></div>\n        </div>\n      </div>\n      '}}t.AboutGame=n},332:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;const i=s(691);s(42),t.Avatar=class{constructor(){this.refresh=()=>{this.avatar.setAttribute("src",`${window.player.image}`),this.firstName.innerHTML=`${window.player.FirstName}`},this.readDataBase=()=>{this.playerLines.innerHTML="",window.database.readAll("players").then((e=>{for(let t=0;t<e.length;t++){const s=document.createElement("li");s.className="playerOneLine";const i=document.createElement("span");i.className="playerName";const n=document.createElement("div");n.className="playerDelete",n.innerHTML="X",n.addEventListener("click",(e=>{var t;const s=null===(t=e.target.closest("li"))||void 0===t?void 0:t.dataset.name;s&&window.database.deleteOne("players",s).then((e=>console.log(e)))})),e[t].FirstName.length>9?i.innerHTML=`${e[t].FirstName.slice(0,8)}... `:i.innerHTML=e[t].FirstName,s.setAttribute("data-name",e[t].FirstName),s.append(i),s.append(n),this.playerLines.append(s)}}))},this.editFormMini=new i.RegFormMini,this.editFormMini.addBtn.innerHTML="Save",this.editFormMini.heading.innerHTML="Edit profile",this.avatarWrapper=document.createElement("div"),this.avatarWrapper.className="avatar__wrapper",this.avatar=document.createElement("img"),this.avatar.className="avatar__img",this.avatar.setAttribute("src",`${window.player.image}`),this.firstName=document.createElement("span"),this.firstName.className="avatar__name",this.firstName.innerHTML=`${window.player.FirstName}`,this.firstName.addEventListener("click",(e=>{e.stopPropagation(),this.readDataBase(),this.playerPanelWrapper.classList.remove("notVisible")})),document.body.addEventListener("click",(()=>this.playerPanelWrapper.classList.contains("notVisible")?"":this.playerPanelWrapper.classList.add("notVisible"))),this.playerPanelWrapper=document.createElement("div"),this.playerPanelWrapper.classList.add("playerPanel__wrapper","notVisible"),this.playerAdd=document.createElement("div"),this.playerAdd.innerHTML="Add new profile",this.playerAdd.className="playerAdd",this.playerAdd.addEventListener("click",(()=>{document.body.classList.add("notScrollable"),window.app.header.cover.classList.remove("notVisible"),window.app.header.regFormMini.regFormWrapper.classList.remove("notVisible"),this.playerPanelWrapper.classList.add("notVisible")})),this.playerEdit=document.createElement("div"),this.playerEdit.innerHTML="Edit my profile",this.playerEdit.className="playerEdit",this.playerEdit.addEventListener("click",(()=>{document.body.classList.add("notScrollable"),window.app.header.cover.classList.remove("notVisible"),this.editFormMini.firstName.setAttribute("value",window.player.FirstName),this.editFormMini.imageContainer.setAttribute("src",`${window.player.image}`),this.editFormMini.addBtn.removeAttribute("disabled"),this.editFormMini.addBtn.classList.remove("invalid"),this.editFormMini.regFormWrapper.classList.remove("notVisible"),this.playerPanelWrapper.classList.add("notVisible")})),this.playerChange=document.createElement("div"),this.playerChange.innerHTML="Change profile:",this.playerChange.className="playerChange",this.playerLines=document.createElement("ul"),this.playerLines.className="playerLines",this.playerLines.addEventListener("click",(e=>{var t;window.database.readOne("players",null===(t=e.target.closest("li"))||void 0===t?void 0:t.dataset.name).then((e=>{window.player=e,window.app.header.avatar.refresh()})),this.playerPanelWrapper.classList.add("notVisible")})),this.playerPanelWrapper.append(this.playerAdd),this.playerPanelWrapper.append(this.playerEdit),this.playerPanelWrapper.append(this.playerChange),this.playerPanelWrapper.append(this.playerLines),this.avatarWrapper.append(this.firstName),this.avatarWrapper.append(this.avatar),this.avatarWrapper.append(this.playerPanelWrapper),this.avatarWrapper.append(this.editFormMini.regFormWrapper)}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,s(76);const i=s(583);class n extends i.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n    <div class="card">\n      <div class="card__front" style="background-image: url('./images/${e}')"></div>\n      <div class="card__back"></div>\n    </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=n},610:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,s(80);const i=s(583),n=s(831);class a extends i.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[],this.SHOW_TIME=30,this.show_timer=null,this.settings=new n.Settings}clear(){this.cards=[],this.element.innerHTML="",this.show_timer&&clearTimeout(this.show_timer)}addCards(e){this.SHOW_TIME=window.app.settings.showTime,this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),this.show_timer=setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),1e3*this.SHOW_TIME)}}t.CardsField=a},342:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Congrat=void 0;const i=s(583);s(442);class n extends i.BaseComponent{constructor(){super("div",["congrat","notVisible"]),this.element.innerHTML='\n      <p class="congrat__text"></p>\n      <button type="submit" class="congrat__btn">OK</button>\n    '}}t.Congrat=n},186:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Database=void 0;const n=s(170),a=i(s(48));t.Database=class{constructor(){this.defPlayer=new n.Player("Player","dbEmpty",0,`${a.default}`,0,8,5)}init(e,t){return new Promise((s=>{const i=window.indexedDB.open(e,t);i.onupgradeneeded=()=>{var e;let t;this.db=i.result,t=this.db.objectStoreNames.contains("players")?null===(e=i.transaction)||void 0===e?void 0:e.objectStore("players"):this.db.createObjectStore("players",{keyPath:"FirstName",autoIncrement:!1}),(null==t?void 0:t.indexNames.contains("score"))||null==t||t.createIndex("score","score")},i.onsuccess=()=>{this.db=i.result,s(i.result)},i.onerror=()=>{console.log(`Error on init() ${ErrorEvent}`)}}))}write(e,t){return new Promise((s=>{const i=this.db.transaction(e,"readwrite"),n=i.objectStore(e).put(t);n.onsuccess=()=>{console.log("complete",n.result),s("Done")},n.onerror=()=>{console.log("error",n.error)},i.onabort=()=>{console.log("abort")}}))}readAll(e){return new Promise(((t,s)=>{const i=this.db.transaction(e,"readonly"),n=i.objectStore(e).getAll();i.oncomplete=()=>{t(n.result)},i.onerror=()=>{s(n.error)}}))}readLast(e){return new Promise(((t,s)=>{const i=this.db.transaction(e,"readonly").objectStore(e).openCursor(),n=[];i.onsuccess=()=>{const e=i.result;null!=e?(n.push(e.value),e.continue()):t(n[n.length-1]),i.onerror=()=>{s(i.error)}}}))}readOne(e,t="player"){return new Promise(((s,i)=>{const n=this.db.transaction([e],"readonly").objectStore(e).getAll(t);n.onsuccess=()=>{void 0===n.result[0]?s(this.defPlayer):s(n.result[0])},n.onerror=()=>{i(this.defPlayer)}}))}deleteOne(e,t=""){return new Promise(((s,i)=>{const n=this.db.transaction([e],"readwrite").objectStore(e).delete(t);n.onsuccess=()=>{s(`Delete ${t} complete!`)},n.onerror=()=>{i(n.error)}}))}readFiltered(e){return new Promise(((t,s)=>{const i=this.db.transaction(e,"readonly"),n=i.objectStore(e).openCursor(null,"prev"),a=[];n.onsuccess=()=>{const e=n.result;e&&(e.value.FirstName&&a.push(e.value),null==e||e.continue())},i.oncomplete=()=>{a.sort(((e,t)=>e.score>t.score?1:-1)),t(a)},i.onerror=()=>{s(i.error)}}))}}},464:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameButton=void 0,s(361),t.GameButton=class{constructor(){this.wrapperBtn=document.createElement("div"),this.wrapperBtn.className="wrapper__btn",this.regBtn=document.createElement("button"),this.regBtn.className="reg__btn",this.regBtn.innerHTML="REGISTER NEW PLAYER","dbEmpty"!==window.player.LastName?this.regBtn.classList.add("notVisible"):this.regBtn.classList.remove("notVisible"),this.regBtn.addEventListener("click",(()=>{document.body.classList.add("notScrollable"),window.app.header.cover.classList.remove("notVisible"),window.app.header.regFormMini.regFormWrapper.classList.remove("notVisible")})),this.startBtn=document.createElement("button"),this.startBtn.classList.add("start__btn","notVisible"),this.startBtn.innerHTML="START GAME","dbEmpty"===window.player.LastName?this.startBtn.classList.add("notVisible"):this.startBtn.classList.remove("notVisible"),this.startBtn.addEventListener("click",(()=>{this.startBtn.classList.add("notVisible"),this.stopBtn.classList.remove("notVisible"),window.location.hash="#game"})),this.stopBtn=document.createElement("button"),this.stopBtn.classList.add("stop__btn","notVisible"),this.stopBtn.innerHTML="STOP GAME",this.stopBtn.addEventListener("click",(()=>{this.stopBtn.classList.add("notVisible"),this.startBtn.classList.remove("notVisible"),window.location.hash="#about-game"}));const e=document.createElement("div");e.className="game__btn",e.append(this.regBtn),e.append(this.startBtn),e.append(this.stopBtn),this.wrapperBtn.append(e)}}},229:function(e,t,s){var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const n=s(680),a=s(583),r=s(977),o=s(610),d=s(342),l=s(831),c=s(981);let m,h;s(936);class p extends a.BaseComponent{constructor(){super("div",["wrapper-cards"]),this.isAnimation=!1,this.finishGame=()=>{const e=document.querySelector(".timer"),t=document.querySelector(".start__btn"),s=document.querySelector(".stop__btn"),i=document.querySelector(".cover"),n=document.querySelector(".congrat"),a=document.querySelector(".congrat__text"),r=document.querySelector(".congrat__btn");t.classList.remove("notVisible"),s.classList.add("notVisible"),this.timer.Stop(),m=e.innerHTML,h=this.timer.resultTime;let o=100*this.rightClick-10*h;o<0&&(o=0),i.classList.remove("notVisible"),n.classList.remove("notVisible"),a.innerHTML=`Congratulations! You successfully found all matches on ${m} minutes. Score: ${o}`,window.database.readOne("players",window.player.FirstName).then((e=>{e.score<o&&(window.player.score=o,window.database.write("players",window.player))})),r.addEventListener("click",(()=>{i.classList.add("notVisible"),n.classList.add("notVisible"),a.innerHTML="",window.location.hash="#best-score"})),i.addEventListener("click",(()=>{i.classList.add("notVisible"),n.classList.add("notVisible"),a.innerHTML="",window.location.hash="#best-score"}))},this.cardsField=new o.CardsField,this.timer=new c.Timer,this.congrat=new d.Congrat,this.timer.Clear(),this.timer.Start(),this.settings=new l.Settings,this.rightClick=0,this.wrongClick=0,this.scoreClick=0,this.score=0,this.element.appendChild(this.timer.element),this.element.appendChild(this.cardsField.element),this.element.appendChild(this.congrat.element)}newGame(e){this.timer.Clear(),this.timer.Start(),this.cardsField.clear(),this.rightClick=0,this.wrongClick=0,this.scoreClick=0,this.score=0;const t=e.concat(e).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t);const s=document.querySelector(".timer"),i=document.querySelector(".start__btn"),n=document.querySelector(".stop__btn");n.addEventListener("click",(()=>{i.classList.remove("notVisible"),n.classList.add("notVisible"),this.timer.Stop(),m=s.innerHTML,h=this.timer.resultTime,window.location.hash="#best-score"}))}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(e.element.classList.add("wrong"),this.activeCard.element.classList.add("wrong"),this.wrongClick++,yield(0,n.delay)(1e3),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()]),e.element.classList.remove("wrong"),this.activeCard.element.classList.remove("wrong")):(e.element.classList.add("right"),this.activeCard.element.classList.add("right"),this.rightClick++,this.rightClick===this.settings.amountCards&&this.finishGame()),this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=p},936:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=s(583),n=s(178),a=s(55),r=s(464),o=s(691),d=s(332);s(528);class l extends i.BaseComponent{constructor(){super("header",["header"]),this.avatar=new d.Avatar,this.logoLink=new n.LogoLink,this.navBar=new a.NavBar([{ref:"#about-game",styles:["nav-link__about","active"],text:"About Game"},{ref:"#best-score",styles:["nav-link__score"],text:"Best Score"},{ref:"#settings",styles:["nav-link__settings"],text:"Game Settings"},{ref:"#indexeddb-test",styles:["nav-link__default"],text:"IndexedDB test"}]),this.gameButton=new r.GameButton,this.regFormMini=new o.RegFormMini,this.cover=document.createElement("div"),this.cover.classList.add("cover","notVisible"),this.cover.addEventListener("click",(()=>{document.body.classList.remove("notScrollable"),this.cover.classList.add("notVisible"),this.regFormMini.regFormWrapper.classList.contains("notVisible")||this.regFormMini.regFormWrapper.classList.add("notVisible")})),this.element.appendChild(this.logoLink.element),this.element.append(this.navBar.list),this.element.append(this.gameButton.wrapperBtn),this.element.append(this.avatar.avatarWrapper),this.element.append(this.cover),this.element.append(this.regFormMini.regFormWrapper)}}t.Header=l},916:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDbTest=void 0,s(533),t.IndexedDbTest=class{constructor(){this.dbTestWrapper=document.createElement("div"),this.dbTestWrapper.className="dbtest__wrapper",this.dbTestInput=document.createElement("input"),this.dbTestInput.type="text",this.dbTestGetIn=document.createElement("input"),this.dbTestGetIn.type="text",this.dbTestGetOut=document.createElement("ul"),this.dbTestGetOut.className="dbTest-out",this.dbTestAddBtn=document.createElement("button"),this.dbTestAddBtn.className="dbtest__button",this.dbTestAddBtn.innerHTML="Add note",this.dbTestAddBtn.addEventListener("click",(()=>{this.addStickyNote(this.dbTest,this.dbTestInput.value)})),this.dbTestGetBtn=document.createElement("button"),this.dbTestGetBtn.className="dbtest__button",this.dbTestGetBtn.innerHTML="Get note",this.dbTestGetBtn.addEventListener("click",(()=>{this.readStickyNote(this.dbTest,this.dbTestGetIn.value)})),this.dbTestGetAllBtn=document.createElement("button"),this.dbTestGetAllBtn.className="dbtest__button",this.dbTestGetAllBtn.innerHTML="Get All note",this.dbTestGetAllBtn.addEventListener("click",(()=>{this.getAndDisplayNotes(this.dbTest)})),this.dbTestWrapper.append(this.dbTestInput),this.dbTestWrapper.append(this.dbTestAddBtn),this.dbTestWrapper.append(this.dbTestGetIn),this.dbTestWrapper.append(this.dbTestGetBtn),this.dbTestWrapper.append(this.dbTestGetOut),this.dbTestWrapper.append(this.dbTestGetAllBtn)}init(e,t){const s=indexedDB.open(e,t);s.onupgradeneeded=()=>{var e;let t;this.dbTest=s.result,t=this.dbTest.objectStoreNames.contains("notes")?null===(e=s.transaction)||void 0===e?void 0:e.objectStore("notes"):this.dbTest.createObjectStore("notes",{autoIncrement:!0}),(null==t?void 0:t.indexNames.contains("timestamp"))||null==t||t.createIndex("timestamp","timestamp")},s.onsuccess=()=>{this.dbTest=s.result},s.onerror=()=>{console.log(`error opening database${s.error}`)}}addStickyNote(e=this.dbTest,t){const s=e.transaction(["notes"],"readwrite"),i=s.objectStore("notes"),n={text:t,timestamp:Date.now()};i.add(n),s.oncomplete=()=>{console.log(`stored note!${t}`)},s.onerror=()=>{console.log(`error storing note${s.error}`)}}readStickyNote(e,t){const s=e.transaction(["notes"],"readonly").objectStore("notes").get(Number(t));s.onsuccess=()=>{const e=s.result;if(e){const t=document.createElement("li");t.innerHTML=`text: ${e.text} timestamp: ${e.timestamp}`,this.dbTestGetOut.append(t)}else console.log(`note ${t} note found`)},s.onerror=()=>{console.log(`error${s.error}`)}}getAndDisplayNotes(e){const t=e.transaction(["notes"],"readonly").objectStore("notes").index("timestamp").openCursor(null,"next"),s=[];t.onsuccess=()=>{const e=t.result;null!=e?(s.push(e.value),e.continue()):this.displayNotes(s)}}displayNotes(e){for(let t=0;t<e.length;t++){const s=e[t],i=document.createElement("li");i.innerHTML=`text: ${s.text} timestamp: ${s.timestamp}`,this.dbTestGetOut.append(i)}}}},178:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogoLink=void 0;const i=s(583);s(814);class n extends i.BaseComponent{constructor(){super("a",["logo-link"]),this.element.innerHTML="",this.element.setAttribute("href","#game"),this.element.setAttribute("title","Go to game!")}}t.LogoLink=n},55:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavBar=void 0,s(730),t.NavBar=class{constructor(e){this.list=document.createElement("ul"),this.list.className="nav-list";for(let t=0;t<e.length;t++){const s=document.createElement("li");s.className="nav-item";const i=document.createElement("a");i.href=e[t].ref,i.classList.add(...e[t].styles),i.innerHTML=e[t].text,s.append(i),this.list.append(s)}window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);document.querySelectorAll(".nav-item a").forEach((e=>{e.classList.remove("active")})),document.querySelectorAll(".nav-item a").forEach((t=>{t.hash.slice(1)===e&&(t.classList.contains("active")||t.classList.add("active"))}))}))}}},170:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0,t.Player=class{constructor(e,t,s,i,n,a,r){this.FirstName=e,this.LastName=t,this.score=s,this.image=i,this.categoryCards=n,this.amountCards=a,this.showTime=r}}},691:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RegFormMini=void 0,s(984);const n=i(s(48));t.RegFormMini=class{constructor(){this.validateFirstName=()=>{""===this.firstName.value?(this.firstName.classList.add("inputError"),this.validArray[0].classList.add("notVisible"),this.firstNameError.innerHTML="Имя не может быть пустым."):this.firstName.value.match(/[0-9]/)?(this.firstName.classList.add("inputError"),this.validArray[0].classList.add("notVisible"),this.firstNameError.innerHTML="Имя не может состоять из цифр."):this.firstName.value.match(/[~!@#$%*()_—+=|:;"'`<>,.?/^]/)?(this.firstName.classList.add("inputError"),this.validArray[0].classList.add("notVisible"),this.firstNameError.innerHTML="Имя не может содержать служебные символы."):(this.firstNameError.innerHTML="",this.firstName.classList.remove("inputError"),this.validArray[0].classList.remove("notVisible"))},this.checkAddButton=()=>{this.firstName.validity.valid?(this.addBtn.classList.remove("invalid"),this.addBtn.removeAttribute("disabled")):(this.addBtn.classList.add("invalid"),this.addBtn.setAttribute("disabled",""))},this.regFormWrapper=document.createElement("div"),this.regFormWrapper.classList.add("reg-form__wrapper","notVisible"),this.heading=document.createElement("h1"),this.heading.className="heading-form",this.heading.innerHTML="Registration new Player";const e=document.createElement("div");e.className="action";const t=document.createElement("div");t.className="input-wrapper";const s=document.createElement("div");s.className="input-container",this.firstName=document.createElement("input"),this.firstName.setAttribute("type","text"),this.firstName.setAttribute("placeholder","Nickname"),this.firstName.setAttribute("maxlength","30"),this.firstName.setAttribute("required","true"),this.firstName.className="first-name",this.firstName.addEventListener("input",(()=>{this.validateFirstName(),this.checkAddButton()})),this.regAvatar=document.createElement("div"),this.regAvatar.className="reg-avatar",this.imageContainer=document.createElement("img"),this.imageContainer.className="image-container",this.imageContainer.setAttribute("src",`${n.default}`),this.playerImage=n.default,this.avatarInput=document.createElement("input"),this.avatarInput.setAttribute("type","file"),this.avatarInput.className="avatar-input",this.avatarInput.addEventListener("change",(()=>{if(this.avatarInput.files){const e=this.avatarInput.files[0],t=new FileReader;t.onload=()=>{this.imageContainer.setAttribute("src",`${t.result}`),this.playerImage=t.result},t.readAsDataURL(e),this.avatarInput.value=""}})),this.firstNameError=document.createElement("div"),this.firstNameError.className="first-name-error",this.validCheckImage=document.createElement("div"),this.validCheckImage.classList.add("validCheck__image","notVisible"),this.validArray=[];for(let e=0;e<3;e++){const e=this.validCheckImage.cloneNode(!0);this.validArray.push(e)}const i=document.createElement("div");i.className="button-container",this.addBtn=document.createElement("button"),this.addBtn.classList.add("reg-form-add__btn","invalid"),this.addBtn.setAttribute("type","submit"),this.addBtn.setAttribute("disabled","true"),this.addBtn.innerHTML="Add User",this.addBtn.addEventListener("click",(()=>{window.app.header.gameButton.regBtn.classList.add("notVisible"),window.app.header.gameButton.startBtn.classList.remove("notVisible"),document.body.classList.remove("notScrollable"),window.app.header.cover.classList.add("notVisible"),window.player.FirstName=this.firstName.value,window.player.LastName="",window.player.score=0,window.player.image=this.playerImage,window.app.header.avatar.refresh(),window.database.write("players",window.player),this.regFormWrapper.classList.add("notVisible")})),this.cancelBtn=document.createElement("button"),this.cancelBtn.className="reg-form-cancel__btn",this.cancelBtn.setAttribute("type","submit"),this.cancelBtn.innerHTML="Cancel",this.cancelBtn.addEventListener("click",(()=>{document.body.classList.remove("notScrollable"),window.app.header.avatar.refresh(),window.app.header.cover.classList.add("notVisible"),this.regFormWrapper.classList.add("notVisible")})),this.regFormWrapper.append(this.heading),this.regFormWrapper.append(e),e.append(t),e.append(i),t.append(s),s.append(this.firstName),s.append(this.firstNameError),s.append(this.validArray[0]),this.regAvatar.append(this.imageContainer),this.regAvatar.append(this.avatarInput),t.append(this.regAvatar),i.append(this.addBtn),i.append(this.cancelBtn)}}},295:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;const i=s(583);s(3);const n=s(155);class a extends i.BaseComponent{constructor(){super("div",["main"]),this.innerElement=null,this.reset=()=>{this.element.innerHTML='\n    <h1 class="heading">Best players</h1>\n    <ul class="score-list">\n    </ul>\n    '},this.addAll=()=>{this.innerElement=document.querySelector(".score-list"),window.database.readAll("players").then((e=>{var t;for(let s=0;s<e.length;s++)this.scoreLine=new n.ScoreLine(e[s].FirstName,e[s].LastName,e[s].score,e[s].image),null===(t=this.innerElement)||void 0===t||t.insertAdjacentElement("afterbegin",this.scoreLine.item)}))},this.addLine=()=>{this.innerElement=null,this.innerElement=document.querySelector(".score-list"),window.database.readFiltered("players").then((e=>{var t;for(let s=0;s<e.length;s++)this.scoreLine=new n.ScoreLine(e[s].FirstName,e[s].LastName,e[s].score,e[s].image),null===(t=this.innerElement)||void 0===t||t.insertAdjacentElement("afterbegin",this.scoreLine.item)}))},this.element.innerHTML='\n    <h1 class="heading">Best players</h1>\n    <ul class="score-list">\n    </ul>\n    '}}t.Score=a},155:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreLine=void 0,t.ScoreLine=class{constructor(e,t,s,i){this.item=document.createElement("li"),this.item.className="score-item";const n=document.createElement("img");n.className="avatar__img",n.setAttribute("src",`${i}`);const a=document.createElement("div");a.className="item-container";const r=document.createElement("div");r.className="item__name",r.innerHTML=`${e} ${t}`;const o=document.createElement("div");o.className="item__score",o.innerHTML=`Score: <span>${s}</span>`,this.item.append(n),a.append(r),this.item.append(a),this.item.append(o)}}},831:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const i=s(583);s(148);class n extends i.BaseComponent{constructor(){super("div",["settings"]),this.categoryCards=window.player.categoryCards,this.amountCards=window.player.amountCards,this.showTime=window.player.showTime,this.categoryArray=[[0,"Argentina"],[1,"Real assets"]],this.amountArray=[[8,"4x4"],[18,"6x6"],[32,"8x8"]],this.timeArray=[1,5,10,20,30],this.gameCards=document.createElement("div"),this.gameCards.className="game-cards";const e=document.createElement("div");e.className="select-container";const t=document.createElement("div");t.className="select-container";const s=document.createElement("div");s.className="select-container";const i=document.createElement("h1");i.className="heading-settings",i.innerHTML="Game cards";const n=document.createElement("h1");n.className="heading-settings",n.innerHTML="Difficulty";const a=document.createElement("h1");a.className="heading-settings",a.innerHTML="Show time";const r=document.createElement("select");r.className="category-cards-select",r.addEventListener("change",(e=>{this.categoryCards=parseInt(e.target.value,10)}));for(let e=0;e<this.categoryArray.length;e++){const t=document.createElement("option");t.className="select-item",t.setAttribute("value",`${this.categoryArray[e][0]}`),t.innerHTML=`${this.categoryArray[e][1]}`,this.categoryArray[e][0]===this.categoryCards&&(t.selected=!0),r.append(t)}const o=document.createElement("select");o.className="amount-cards-select",o.addEventListener("change",(e=>{this.amountCards=parseInt(e.target.value,10)}));for(let e=0;e<this.amountArray.length;e++){const t=document.createElement("option");t.className="select-item",t.setAttribute("value",`${this.amountArray[e][0]}`),t.innerHTML=`${this.amountArray[e][1]}`,this.amountArray[e][0]===this.amountCards&&(t.selected=!0),o.append(t)}const d=document.createElement("select");d.className="show-time-select",d.addEventListener("change",(e=>{this.showTime=parseInt(e.target.value,10)}));for(let e=0;e<this.timeArray.length;e++){const t=document.createElement("option");t.className="select-item",t.setAttribute("value",`${this.timeArray[e]}`),t.innerHTML=`${this.timeArray[e]}`,this.timeArray[e]===this.showTime&&(t.selected=!0),d.append(t)}this.doneLabel=document.createElement("label"),this.doneLabel.classList.add("done-label","notVisible"),this.doneLabel.innerHTML="Done!",this.saveBtn=document.createElement("button"),this.saveBtn.classList.add("save__btn"),this.saveBtn.setAttribute("type","submit"),this.saveBtn.innerHTML="Save",this.saveBtn.addEventListener("click",(()=>{window.player.categoryCards=this.categoryCards,window.player.amountCards=this.amountCards,window.player.showTime=this.showTime,window.database.write("players",window.player).then((e=>{e&&(this.doneLabel.classList.remove("notVisible"),setTimeout((()=>this.doneLabel.classList.add("notVisible")),1500))}))}));const l=document.createElement("div");l.className="button-container",e.append(i),e.append(r),this.gameCards.append(e),t.append(n),t.append(o),this.gameCards.append(t),s.append(a),s.append(d),this.gameCards.append(s),l.append(this.saveBtn),l.append(this.doneLabel),this.gameCards.append(l),this.element.append(this.gameCards)}}t.Settings=n},981:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,s(580),t.Timer=class{constructor(){this.sec=0,this.min=0,this.resultTime=0,this.tick=()=>{this.sec++,this.sec>=60&&(this.min++,this.sec-=60),this.sec<10?this.min<10?this.element.innerHTML=`0${this.min}:0${this.sec}`:this.element.innerHTML=`${this.min}:0${this.sec}`:this.min<10?this.element.innerHTML=`0${this.min}:${this.sec}`:this.element.innerHTML=`${this.min}:${this.sec}`},this.Start=()=>{this.timerId=setInterval(this.tick,1e3)},this.Stop=()=>{this.timerId&&clearInterval(this.timerId),this.resultTime=this.sec+60*this.min},this.Clear=()=>{this.sec=0,this.min=0,this.timerId&&clearInterval(this.timerId),this.element.innerHTML=`0${this.min}:0${this.sec}`},this.element=document.createElement("div"),this.element.classList.add("timer"),this.timerId=null}}},432:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=void 0;const i=s(583);class n extends i.BaseComponent{constructor(){super("div",["wrapper"])}}t.Wrapper=n},607:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(387);const n=s(752),a=s(170),r=s(186),o=i(s(48));window.database=new r.Database,window.database.init("barmenski",1).then((e=>console.log(`IndexedDB '${e.name}' inited!`))).then((()=>window.database.readLast("players"))).then((e=>{window.player=void 0===e?new a.Player("Player","dbEmpty",0,`${o.default}`,0,8,5):new a.Player(`${e.FirstName}`,`${e.LastName}`,e.score,`${e.image}`,e.categoryCards,e.amountCards,e.showTime)}),(e=>{console.log(e)})).then((()=>{const e=document.querySelector("body");if(!e)throw Error("<body> element not found");window.app=new n.App(e),window.app.initPage();const t=[{name:"settings",component:window.app.settingsPage},{name:"game",component:window.app.gamePage},{name:"best-score",component:window.app.bestScorePage},{name:"indexeddb-test",component:window.app.indexedDbPage}],s={name:"default",component:window.app.aboutGamePage};window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);(t.find((t=>t.name===e))||s).component()}))}))},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}},48:(e,t,s)=>{e.exports=s.p+"assets/5fdcfa39728467149e6e.svg"}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),s(607)})();